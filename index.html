<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wegovyåƒ¹æ ¼æ›ç®—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
        }
        
        /* æ‰‹æ©Ÿå„ªåŒ–æ¨£å¼ */
        input[type="number"] {
            font-size: 16px; /* é˜²æ­¢iOSç¸®æ”¾ */
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }
        
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        select {
            font-size: 16px; /* é˜²æ­¢iOSç¸®æ”¾ */
        }
        
        /* è§¸æ§å„ªåŒ– */
        button {
            touch-action: manipulation;
        }
        
        /* æ”¹å–„å°æ¯”åº¦ */
        .input-light {
            background-color: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .input-light:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-sm mx-auto bg-white min-h-screen shadow-lg">
        <!-- å›ºå®šæ¨™é¡Œå€ -->
        <div class="sticky top-0 bg-white z-10 px-4 py-4 border-b border-gray-200">
            <h1 class="text-xl font-bold text-center mb-1 text-gray-800">Wegovyåƒ¹æ ¼æ›ç®—</h1>
            <p class="text-center text-gray-600 text-sm">è¨ˆç®—PAPå›é¥‹å¾Œï¼Œæ¯ç›’1mgçš„å¹³å‡åƒ¹æ ¼</p>
        </div>
        
        <!-- æ»¾å‹•å…§å®¹å€ -->
        <div class="px-4 py-4 pb-20">

            <!-- 1.0mg æ–¹æ¡† -->
            <div class="mb-4 p-4 rounded-xl shadow-sm" style="background-color: #b8e1dc;">
                <h2 class="text-lg font-bold mb-3 text-gray-800 text-center">1.0mg</h2>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">è³¼è²·ç›’æ•¸</label>
                        <input type="number" id="A1" min="0" inputmode="numeric" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ¯ç›’é‡‘é¡ (NT$)</label>
                        <input type="number" id="A2" min="0" step="0.01" inputmode="decimal" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0.00">
                    </div>
                </div>
            </div>

            <!-- 1.7mg æ–¹æ¡† -->
            <div class="mb-4 p-4 rounded-xl shadow-sm" style="background-color: #0192c1;">
                <h2 class="text-lg font-bold mb-3 text-white text-center">1.7mg</h2>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">è³¼è²·ç›’æ•¸</label>
                        <input type="number" id="B1" min="0" inputmode="numeric" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">æ¯ç›’é‡‘é¡ (NT$)</label>
                        <input type="number" id="B2" min="0" step="0.01" inputmode="decimal" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0.00">
                    </div>
                </div>
            </div>

            <!-- 2.4mg æ–¹æ¡† -->
            <div class="mb-4 p-4 rounded-xl shadow-sm" style="background-color: #57656e;">
                <h2 class="text-lg font-bold mb-3 text-white text-center">2.4mg</h2>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">è³¼è²·ç›’æ•¸</label>
                        <input type="number" id="C1" min="0" inputmode="numeric" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">æ¯ç›’é‡‘é¡ (NT$)</label>
                        <input type="number" id="C2" min="0" step="0.01" inputmode="decimal" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg" placeholder="0.00">
                    </div>
                </div>
            </div>

            <!-- è´ˆé€è—¥å“æ•¸é‡æ–¹æ¡† -->
            <div class="mb-6 p-4 rounded-xl shadow-sm" style="background-color: #57656e;">
                <h2 class="text-lg font-bold mb-2 text-white text-center">ğŸ è´ˆé€è—¥å“æ•¸é‡</h2>
                <div class="bg-black bg-opacity-20 rounded-lg p-3 mb-4">
                    <p class="text-xs text-white leading-relaxed">è´ˆé€æœƒä»¥åŠ‘é‡è¨ˆç®—ï¼Œä¾†å¹³å‡æ¯1mgåƒ¹æ ¼ã€‚ç¸½å›é¥‹ç›’æ•¸æœ€å¤šç‚º3ç›’</p>
                </div>
                <div class="space-y-3">
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">é¸æ“‡è´ˆé€åŠ‘é‡</label>
                        <select id="dosageSelect" class="w-full px-4 py-3 input-light rounded-lg focus:outline-none text-lg">
                            <option value="1">1.0mg</option>
                            <option value="1.7">1.7mg</option>
                            <option value="2.4">2.4mg</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-white mb-2">è´ˆé€ç›’æ•¸ (è‡ªå‹•è¨ˆç®—)</label>
                        <div class="w-full px-4 py-3 bg-gray-200 rounded-lg text-lg text-gray-600 text-center font-bold">
                            <span id="E1Display">0</span> ç›’
                        </div>
                        <input type="hidden" id="E1" value="0">
                    </div>
                </div>
            </div>

            <!-- è¨ˆç®—æŒ‰éˆ• -->
            <button onclick="calculatePrice()" class="w-full py-4 rounded-xl text-white font-bold text-lg mb-6 shadow-lg active:scale-95 transition-transform" style="background-color: #ee82ee;">
                ğŸ§® è¨ˆç®—å¹³å‡åƒ¹æ ¼
            </button>

            <!-- çµæœé¡¯ç¤ºå€åŸŸ -->
            <div id="result" class="text-center mb-6"></div>
        </div>
        
        <!-- å›ºå®šåº•éƒ¨å®‰å…¨å€ -->
        <div class="h-20"></div>
    </div>

    <script>
        // ç›£è½è¼¸å…¥è®ŠåŒ–ï¼Œè‡ªå‹•æ›´æ–°è´ˆé€ç›’æ•¸
        document.addEventListener('input', function(e) {
            if (e.target.id === 'A1' || e.target.id === 'B1' || e.target.id === 'C1') {
                updateGiftBoxes();
            }
        });

        function updateGiftBoxes() {
            const A1 = parseInt(document.getElementById('A1').value) || 0;
            const B1 = parseInt(document.getElementById('B1').value) || 0;
            const C1 = parseInt(document.getElementById('C1').value) || 0;
            const total = A1 + B1 + C1;
            
            let E1 = 0;
            if (total < 3) {
                E1 = 0;
            } else if (total === 3 || total === 4 || total === 5) {
                E1 = 1;
            } else if (total >= 6) {
                E1 = 3;
            }
            
            document.getElementById('E1').value = E1;
            document.getElementById('E1Display').textContent = E1;
            
            // æ›´æ–°ç¸½ç›’æ•¸é¡¯ç¤º
            updateTotalBoxes(total);
        }
        
        function updateTotalBoxes(total) {
            // å¯ä»¥åœ¨é€™è£¡æ·»åŠ ç¸½ç›’æ•¸çš„è¦–è¦ºåé¥‹
            const resultDiv = document.getElementById('result');
            if (total > 0 && total < 3) {
                resultDiv.innerHTML = '<div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded-lg text-sm">ğŸ’¡ è³¼è²· ' + total + ' ç›’ï¼Œé‚„éœ€è¦ ' + (3 - total) + ' ç›’æ‰èƒ½ç²å¾—è´ˆå“</div>';
            } else if (total >= 3) {
                resultDiv.innerHTML = '<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg text-sm">âœ… è³¼è²· ' + total + ' ç›’ï¼Œç¬¦åˆè´ˆå“æ¢ä»¶ï¼</div>';
            } else {
                resultDiv.innerHTML = '';
            }
        }

        function calculatePrice() {
            const A1 = parseInt(document.getElementById('A1').value) || 0;
            const A2 = parseFloat(document.getElementById('A2').value) || 0;
            const B1 = parseInt(document.getElementById('B1').value) || 0;
            const B2 = parseFloat(document.getElementById('B2').value) || 0;
            const C1 = parseInt(document.getElementById('C1').value) || 0;
            const C2 = parseFloat(document.getElementById('C2').value) || 0;
            const selectedDosage = parseFloat(document.getElementById('dosageSelect').value);
            const E1 = parseInt(document.getElementById('E1').value) || 0;
            
            const totalBoxes = A1 + B1 + C1;
            const resultDiv = document.getElementById('result');
            
            if (totalBoxes < 3) {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-4">
                        <div class="text-red-600 text-lg font-bold mb-2">âŒ ç„¡æ³•è¨ˆç®—</div>
                        <p class="text-red-600 text-sm">è³¼è²·ç¸½ç›’æ•¸é ˆç‚º3ç›’ä»¥ä¸Šæ‰èƒ½äº«æœ‰PAPå›é¥‹</p>
                    </div>
                `;
                return;
            }
            
            // è¨ˆç®—ç¸½æˆæœ¬
            const totalCost = (A1 * A2) + (B1 * B2) + (C1 * C2);
            
            // è¨ˆç®—ç¸½åŠ‘é‡ (åŒ…å«è³¼è²·çš„å’Œè´ˆé€çš„)
            const purchasedDosage = (A1 * 1.0) + (B1 * 1.7) + (C1 * 2.4);
            const giftDosage = selectedDosage * E1;
            const totalDosage = purchasedDosage + giftDosage;
            
            // è¨ˆç®—æ¯1mgå¹³å‡åƒ¹æ ¼
            const avgPrice = totalCost / totalDosage;
            
            resultDiv.innerHTML = `
                <div class="bg-gradient-to-r from-purple-100 to-pink-100 border-2 border-purple-200 rounded-xl p-6 mb-4 shadow-lg">
                    <div class="text-center">
                        <div class="text-gray-600 text-sm mb-2">ğŸ’° æ¯1mgå¹³å‡åƒ¹æ ¼</div>
                        <div class="text-4xl font-bold text-purple-800 mb-2">NT$ ${avgPrice.toFixed(2)}</div>
                        <div class="text-xs text-gray-500 bg-white bg-opacity-50 rounded-lg px-3 py-2">
                            ç¸½æˆæœ¬: NT$ ${totalCost.toFixed(2)} Ã· ç¸½åŠ‘é‡: ${totalDosage.toFixed(1)}mg
                        </div>
                    </div>
                </div>
                <div class="bg-green-50 border border-green-200 rounded-lg p-3 text-xs text-green-700">
                    âœ… å·²åŒ…å« ${E1} ç›’ ${selectedDosage}mg è´ˆå“ (${(selectedDosage * E1).toFixed(1)}mg)
                </div>
            `;
        }

        // åˆå§‹åŒ–è´ˆé€ç›’æ•¸
        updateGiftBoxes();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'970627deb2ee5700',t:'MTc1NTQwMjA4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
